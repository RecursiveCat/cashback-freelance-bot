# Cashback by bonuses bot

Телеграм бот,который будет учитывать накопленные бонусы при совершении покупок. 

Существует 3 типа пользователей:<br>
Продавец, Оператор, Покупатель<br>
<br>
Продавец умеет:<br> 
  1. Задавать процент бонусов 
  2. Задавать процент реферальных вознаграждений
  3. Начислять бонусы клиентам
  4. Списать бонусы у клиентов

Оператор:
  pass

Покупатель умеет:
  1. Сообщать код продавцу
  2. Списывать бонусы
  3. Получить реферальную ссылку

каждый тип имеет свои кнопки и функции

Покупатель коммуницирует с оператором, чтобы совершить покупку, 
используя бонусы. Пользователь получает дополнительный процент 
ко всем покупкам, если он приглашает другого потенциального 
пользователя используя реферальную ссылку, 
кликнув на которую приглашенный закрепляется к пригласителю.
Пользователь может получить бонусы, если продавец нажимает на кнопку 
"Начислить бонусы", он выбирает, кому начислить бонусы и этому 
пользователю в личку приходит ссылка, нажав на которую пользователю 
начисляются бонусы. Так же у пользователя могут снять бонусы, 
для этого продавец используя кнопку "списать бонусы" выбирает 
пользователя и спрашивает у него суммы покупки (не знаю зачем) и 
код операции, оператор вводит этот код в бот и после бот удаляет 
эти бонусы по этому коду. по кнопке "бонусы" - человек связывается
с оператором и говорит о своей операции. по кнопке "мои бонусы" 
пользователь может посмотреть коды операций и бонус


Предприятие:
inst_id INT,
name TEXT,
admin BIGINT,
bonus_precents TINYINT,
referal_precents TINYINT,
reffer_precents TINYINT

Операторы:
user_id BIGINT,
inst_id INT

Операции:
code TEXT,
item CHAR(1),
user_id BIGINT

Предприятия, с которыми работал пользователь:
user_id BIGINT,
inst_id INT

Пользователи:
user_id BIGINT,
name TEXT,
bonuses INT

———————————————————————————
Методы:
1. регистрация пользователя в бд, принимает юзер айди и имя
2. создание оператора, принимает айди предприятия и юзер айди
3. добавление реферала, принимает юзер айди и юзер айди реферала
4. получить предприятия, с котороыми работал пользователь, принимает юзер айди
5. регистрация новой операции, принимает код, тип и юзер айди
6. получить информацию о предприятии, принимает айди предприятия
7. проверка пользователя на наличие своего бизнеса, принимает юзер айди
8. проверка на наличие кода операции в БД, принимает код
9. получить айди предприятия, с которым связан пользователь, если это оператор, то ищет предприятие, к которому он привязан, если это предприниматель, то ищет предприятие, к которому он привязан., принимает юзер айди
10. получать намерение операции (+ или -, копить или снять), принимает код операции
11. начислить бонусы пользователю, принимает айди предприятия, юзер айди, количество
12. получить количество рефералов, принимает юзер айди
14. изменение процента для своего предприятия, принимает тему (bonus, referal, reffer), айди предприятия
